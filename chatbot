import logging
from aiogram import Bot, Dispatcher, types
from aiogram.utils import executor
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
import datetime

API_TOKEN = 'Hsjjsjjj_bot'
CHANNEL_ID =2400174743 '@nnnnnmnllk'

logging.basicConfig(level=logging.INFO)
bot = Bot(token=7926034069:AAEtV9uN8du2tIKOwXCDUmG0G1Jr1TV0qe4)
dp = Dispatcher(bot)

# Tasdiqlash tugmasi
confirm_button = InlineKeyboardMarkup(row_width=1)
confirm_button.add(InlineKeyboardButton("âœ… Tasdiqlash", callback_data='confirm'))

@dp.message_handler(commands=['start'])
async def send_welcome(message: types.Message):
Â Â Â  await message.reply("Salom! Davomat uchun 'Kelganman' deb yozing.")

@dp.message_handler(lambda message: message.text.lower() == 'kelganman')
async def check_in(message: types.Message):
Â Â Â  await message.reply("Iltimos, kelganingizni tasdiqlang:", reply_markup=confirm_button)

@dp.callback_query_handler(lambda c: c.data == 'confirm')
async def confirm(callback_query: types.CallbackQuery):
Â Â Â  user = callback_query.from_user
Â Â Â  now = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
Â Â Â  text = f"ðŸ‘¤ {user.full_name} (@{user.username})\nðŸ•’ Kelgan vaqti: {now}"
Â Â Â  
Â Â Â  # Kanalga yuborish
Â Â Â  await bot.send_message(CHANNEL_ID, text)
Â Â Â  
Â Â Â  # Foydalanuvchiga javob
Â Â Â  await callback_query.message.edit_text("âœ… Davomatingiz qayd etildi!")
Â Â Â  
if name == 'main':
Â Â Â  executor.start_polling(dp, skip_updates=True)
